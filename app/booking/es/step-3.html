<!DOCTYPE html>
<html lang="es">

<head>
  [% include 'es/includes/head.html' %]
</head>

<body>
  <div class="tabs-container">

    [% include 'es/includes/header.html' %]

    <div class="main-booking">
      <div class="main-contain">
        <div class="panel-container pure-g">

          <div class="left tab3 pure-u-1 pure-u-lg-14-24">

            <h2>Reserva tu habitación</h2>

            [% if data.logged %]

            <div class="form">
            <form id="book-form" action="/booking/4" method="post">
              <fieldset>
                <div class="logged-booking pure-g">

                  <h3 class="pure-u-1">Hola [[data.customer.Name]]</h3>
                  <p class="pure-u-1">Completa los siguientes datos para formalizar tu reserva.</p>

                  <div class="pure-u-1">
                    <div class="campo">
                      <label class="label">Motivo de la estancia</label>
                      <select name="Reason_id" required>
                        <option value="">Selecciona motivo</option>
                        [% for c in data.reasons %]
                        <option value="[[c.id]]">[[c.Name]]</option>
                        [% endfor %]
                       </select>
                    </div>
                  </div>

                  <input type="hidden" name="book_action" value="book">

                  <section class="next">
                    <button type="submit" class="btn-secondary">Confirmar y reservar</button>
                  </section>

                </div>

              </fieldset>
            </form>

            <form id="logout-form" action="/booking/4" method="post" style="margin-top: -40px;">
              <fieldset>
                <div class="pure-g">
                  <section class="next">
                    <input type="hidden" name="book_action" value="logout">
                    <button type="submit" class="btn-primary">No soy [[data.customer.Name]]</button>
                  </section>
                </div>
              </fieldset>
            </form>
            </div>

            [% else %]

            <div class="form">
            <form id="login-form" action="/booking/4" method="post">
              <fieldset>
                <div class="login pure-g">

                  <h3 class="pure-u-1">Inicia sesión</h3>
                  <p class="pure-u-1">Utiliza tus credenciales para acceder.</p>

                  <div class="pure-u-1">
                      <div class="campo">
                      <label class="label">Email</label>
                      <input class="input" type="email" name="book_user"
                             required placeholder="Tu email">
                    </div>
                  </div>
                  <div class="pure-u-1">
                    <div class="campo psw">
                      <label class="label">Contraseña</label>
                      <input class="input" type="password" name="book_password"
                             required placeholder="Tu contraseña">
                    </div>
                  </div>

                  [% if data.error_login %]
                  <div class="pure-u-1 error-message"><p>[[data.error_login[data.lang]]]</p></div>
                  [% endif %]

                  <p class="advise">
                    Si ha olvidado su contraseña puedes restablecerla utilizando nuestro
                    <a href="https://core.cotown.com/auth/realms/airflows/login-actions/reset-credentials?client_id=airflows-private">formulario de recuperación de contraseña</a>.
                  </p>

                  <input type="hidden" name="book_action" value="login">

                  <section class="next">
                    <button type="submit" class="btn-secondary">Iniciar sesión</button>
                  </section>

                </div>
              </fieldset>
            </form>
            </div>

            <div class="form">
            <form id="register-form" action="/booking/4" method="post">
              <fieldset>
                <div class="registry pure-g">

                  <h3 class="pure-u-1 record">O regístrate</h3>
                  <p class="pure-u-1">Necesitaremos tus datos para formalizar la reserva.</p>

                  <div class="pure-u-1">
                    <div class="campo">
                      <label class="label">Nombre y apellidos</label>
                      <input class="input" type="name" name="Name" value="[[data.customer.Name]]"
                             required placeholder="Tú nombre y apellidos">
                    </div>
                  </div>

                  <div class="pure-u-1">
                    <div class="campo">
                      <label class="label">Email</label>
                      <input class="input" type="email" name="Email" value="[[data.customer.Email]]"
                             required placeholder="Tu email">
                    </div>
                  </div>

                  <div class="pure-u-1-3">
                    <div class="campo">
                      <label class="label">Prefijo telefónico</label>
                      <select name="Prefix" required>
                        <option value="">Selecciona prefijo</option>
                        [% for c in data.countries %]
                        [% if c.Prefix != null %]
                        <option value="[[c.Prefix]]"[% if c.Prefix==data.customer.Prefix %] selected[% endif %]>[[c.Name]] ([[c.Prefix]])</option>
                        [% endif %]
                        [% endfor %]
                      </select>
                    </div>
                  </div>

                  <div class="pure-u-2-3">
                    <div class="campo">
                      <label class="label">Número de teléfono</label>
                      <input class="input" type="name" name="Phone"
                             required value="[[data.customer.Phone]]" placeholder="Tu nº de teléfono">
                    </div>
                  </div>

                  <div class="pure-u-1 pure-u-lg-1-3">
                    <div class="campo">
                      <div class="dates">
                        <label class="label">Fecha de nacimiento</label>
                        <input type="date" name="Birth_date"
                               required value="[[data.customer.Birth_date]]" placeholder="Fecha dd/mm/aaaa"/>
                      </div>
                    </div>
                  </div>

                  <div class="pure-u-1 pure-u-lg-1-3">
                    <div class="campo">
                      <label class="label">Nacionalidad</label>
                      <select name="Nationality_id" required>
                        <option value="">Selecciona país</option>
                        [% for c in data.countries %]
                        <option value="[[c.id]]"[% if c.id==data.customer.Nationality_id %] selected[% endif %]>[[c.Name]]</option>
                        [% endfor %]
                      </select>
                    </div>
                  </div>

                  <div class="pure-u-1 pure-u-lg-1-3">
                    <div class="campo">
                      <label class="label">Género</label>
                      <select name="Gender_id" required>
                        <option value="">Selecciona género</option>
                        [% for c in data.genders %]
                        <option item="[[data.customer.Gender_id]]" value="[[c.id]]"[% if c.id==data.customer.Gender_id %] selected[% endif %]>[[c.Name]]</option>
                        [% endfor %]
                      </select>
                    </div>
                  </div>

                  [% if data.error_register %]
                  <div class="pure-u-1 error-message"><p>[[data.error_register[data.lang]]]</p></div>
                  [% endif %]

                  <div class="pure-u-1">
                    <div class="campo checkbox">
                      <input id="accept" name="accept" type="checkbox" required/>
                      <label for="accept" class="pure-checkbox">
                        Acepto las condiciones del servicio y la <a href="/es/politica-privacidad.html">política de privacidad</a>
                      </label>
                    </div>
                  </div>          
         
                  <input type="hidden" name="book_action" value="register">

                  <section class="next">
                    <button type="submit" class="btn-secondary">Registrarse</button>
                  </section>

                </div>
                [% endif %]

              </fieldset>
            </form>
            </div>
            
          </div>

          [% include 'en/includes/summary.html' %]

        </div>
      </div>
    </div>

  </div>

</body>

[% include 'en/includes/footer.html' %]

</html>