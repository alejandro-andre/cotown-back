<html>
<head>
  <script>
    // Prepare response
    function do_select() {
      var pairs = location.hash.substring(1).split('&');
      var fragment = {};
      pairs.forEach(function(pair) {
        pair = pair.split('=');
        fragment[pair[0]] = decodeURIComponent(pair[1] || '');
      });
      const hashParams = {
        entity: fragment['entity'],
        entityId: parseInt(fragment['entityId'], 10),
        attribute: fragment['attribute'],
      }

      // Respond
      hashParams['value'] = document.getElementById("sel").value
      window.opener.postMessage(hashParams, "*");
      window.close();
    }
  </script>
</head>
<body>
  <input id="sel" type="text" value="1">
  <button onclick="do_select();">Seleccionar</button>
</body>
</html>
